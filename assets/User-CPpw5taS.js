import{r as s,G as b,o as E,H as U,h as l,j as H,i as o,x as n,B as x,F as T,C as A,g as r,u as g,D as L,A as N}from"./vendor-DHGCqLyH.js";import{_ as B}from"./ProfileCard-DbetDmHs.js";import{u as V,g as D,m as i,e as M}from"./index-BvAo4jYu.js";const F={key:0},P={class:"toolbar"},S={class:"toolitem"},j=["onClick"],z=["onClick"],G=["innerHTML"],Q={key:1,class:"load-progress"},W={__name:"User",setup(R){const u=N(),c=V(),p=s(!1);s(!1);const k=s(""),y=s(""),I=s(0);s(0),s(0);const v=s([]),f=s(0),_=s(!1);var d=null,$=null;const m=D("userId");async function w(){const t=await c.getAccountPost(m);t.code==1&&t.status==1?(f.value=t.last,_.value=t.more,t.posts.forEach(e=>{v.value.push(e)})):i("错误",`${t.code} ${t.status}`)}const h=b(()=>{const t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.scrollHeight,a=document.documentElement.clientHeight;Math.abs(t+a-e)<1&&w()},500);return E(async()=>{if(m){var t=await c.getUserInfo(m,!0);t.code==1&&t.status==1?(d=t.accountInfo,$=t.accountCount,k.value=d.nickName,y.value=await c.getAvatarUrl(d.avatar),I.value=$.postCount,p.value=!0,t=await c.getUserPost(d.userId,null,f.value),t.code==1&&t.status==1?(f.value=t.last,_.value=t.more,t.posts.forEach(e=>{v.value.push(e)})):i("错误",`${t.code} ${t.status}`)):t.status?i("找不到用户",`ID: ${m} 请检查链接是不是没复制完全?`,()=>u.back()):i("错误",`${t.code} ${t.status}`)}else i("错误","未提供userID参数",()=>u.back());window.addEventListener("scroll",h)}),U(()=>{window.removeEventListener("scroll",h)}),(t,e)=>p.value?(r(),l("div",F,[H(B,{avatarUrl:y.value,name:k.value,loading:!p.value},null,8,["avatarUrl","name","loading"]),o("mdui-card",null,[o("div",P,[o("div",S,[n(x(I.value)+" ",1),e[0]||(e[0]=o("br",null,null,-1)),e[1]||(e[1]=n("文章 "))]),e[2]||(e[2]=o("div",{class:"toolitem"},[n(" 0 "),o("br"),n("粉丝 ")],-1)),e[3]||(e[3]=o("div",{class:"toolitem"},[n(" 0 "),o("br"),n("合集 ")],-1))])]),e[4]||(e[4]=o("mdui-divider",{style:{margin:"0px auto 2px"}},null,-1)),(r(!0),l(T,null,A(v.value,(a,q)=>(r(),l("mdui-card",{key:a.postId},[a.title?(r(),l("div",{key:0,style:{"font-size":"1.3em",margin:"10px"},onClick:C=>g(u).push(`/post?postId=${a.postId}`)},[o("strong",null,x(a.title),1)],8,j)):L("",!0),o("div",{style:{"text-indent":"0em",margin:"10px"},onClick:C=>g(u).push(`/post?postId=${a.postId}`)},[o("div",{style:{"white-space":"pre-wrap"},innerHTML:g(M)(a.content)},null,8,G)],8,z)]))),128))])):(r(),l("div",Q,e[5]||(e[5]=[n(" 加载中 "),o("mdui-linear-progress",null,null,-1)])))}};export{W as default};
