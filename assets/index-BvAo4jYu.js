const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-ksQhdheh.js","assets/vendor-DHGCqLyH.js","assets/homePage-BLQsmEBP.js","assets/HomeView-C2DW5tmL.css","assets/Login-CmC4huUq.js","assets/Login-DL1H6Px7.css","assets/Register-Dvxgqav8.js","assets/Register-0DtASLKf.css","assets/PostNew-BFiuXj4Z.js","assets/Post-C5oOjx86.js","assets/AccountBar-3FUT1BDo.js","assets/AccountBar-DXBbzhB9.css","assets/AccountPost-B58ZAFfa.js","assets/User-CPpw5taS.js","assets/ProfileCard-DbetDmHs.js","assets/ProfileCard-BpzHvNdQ.css","assets/Profile-B79dc2Ao.js","assets/NotFound-DDPPKVnR.js","assets/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{s as B,a as M,d as I,r as w,b as A,c as H,e as b,f as W,o as K,g as Q,h as X,i as h,j as Y,u as z,R as G,F as J,k as Z,l as tt,m as et,n as ot}from"./vendor-DHGCqLyH.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function c(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?t.credentials="include":a.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(a){if(a.ep)return;a.ep=!0;const t=c(a);fetch(a.href,t)}})();const st="/favicon.png";function C(i){B({message:i})}function ht(i,u,c=null,l="OK"){M({headline:i,description:u,confirmText:l,closeOnOverlayClick:!0,closeOnEsc:!0,onConfirm:()=>{c&&c()}})}function gt(i){for(var u=window.location.search.substring(1),c=u.split("&"),l=0;l<c.length;l++){var a=c[l].split("=");if(a[0]==i)return a[1]}return null}const nt=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function yt(i){let u=nt(i);return u=u.replace(/ /g,"&nbsp;"),u=u.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),u=u.replace(`
`,"<br/>"),u=u.replace("\r","<br/>"),u}function rt(i){const u=document.cookie.split(";");for(let c=0;c<u.length;c++){const l=u[c].trim();if(l.startsWith(i+"="))return l.substring(i.length+1)}return null}function at(i,u,c=3650){var l="";if(c){var a=new Date;a.setTime(a.getTime()+c*24*60*60*1e3),l="; expires="+a.toUTCString()}document.cookie=i+"="+u+l+"; path=/"}function T(i,u=""){const c=[];for(let l in i){if(!Object.prototype.hasOwnProperty.call(i,l))continue;let a=i[l],t=u?`${u}[${l}]`:l;typeof a=="object"&&a!==null?c.push(T(a,t)):c.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}return c.join("&")}const it=I("homePage",()=>{const i=w("light"),u=w("#7F3C5C70");function c(t){i.value!=t&&(i.value=t),A(i.value)}function l(t){i.value==="auto"||i.value==="light"?i.value="dark":i.value="light",c(i.value),t&&t(i.value)}function a(){H(u.value),A(i.value)}return{mode:i,color:u,setMode:c,switchMode:l,applyTheme:a}}),ut=I("api",()=>{const i="mylxToken";var u="https://mylx2-api.unknownmp.lol/",c=!1,l=!1,a="";const t=w({}),d=w({}),v=w(null);async function f(r,o){const e=o?`${u}${r}?${T(o)}`:`${u}${r}`;return(await b.get(e,{headers:{token:a}})).data}async function g(r,o){const e=`${u}${r}`;return(await b.post(e,o,{headers:{"Content-Type":"application/json",token:a}})).data}async function E(){t.value=await f("config")}async function m(){if(!c){if(l){for(;l;)await new Promise(r=>setTimeout(r,100));return}l=!0,a=rt(i),a||(a=(await f("token")).token),await E(),v.value=t.value.isLogin,d.value=t.value.accountInfo,at(i,a),c=!0,l=!1,console.log(`[MYLX] Token is ${a}`),console.log(`[MYLX] OSS endpoint id ${t.value.ossEndpoint}`)}}async function P(){c=!1,await m()}async function _(r){return r?`${t.value.ossEndpoint}/${r}`:`${t.value.ossEndpoint}/${t.value.defaultAvatarID}`}async function O(r,o){await m();var e={status:0};try{return e=await g("account/login",{userName:r,password:o}),result.status==1&&(v.value=!0,t.value.accountInfo=e.userInfo,t.value=E()),e}catch(s){s.response&&s.response.status===401&&(e.status=2)}return e}async function $(){await m();var r={status:0,code:0};try{const o=await g("account/logout");r.status=o.status,r.code=1,o.status==1&&(v.value=!1,t.value.accountInfo={})}catch(o){if(o.name=="AxiosError")r.code=2,r.status=o.response&&o.response.status;else throw o}return r}async function x(r,o,e){await m();var s={status:0,code:0};try{const n=await g("post/new",{title:o,content:r,collectionId:e});s.status=n.status,s.code=1,n.status==1&&(s.postId=n.postId)}catch(n){if(n.name=="AxiosError")s.code=2,s.status=n.response&&n.response.status;else throw n}return s}async function R(r){await m();var o={status:0,code:0};if(!v.value)return o.code=3,o;try{const e=await f("post/delete",{postId:r});o.status=e.status,o.code=1}catch(e){if(e.name=="AxiosError")o.code=2,o.status=e.response&&e.response.status;else throw e}return o}async function S(r){await m();var o={status:0,code:0};if(!v.value)return o.code=3,o;try{const e=await f("comment/delete",{commentId:r});o.status=e.status,o.code=1}catch(e){if(e.name=="AxiosError")o.code=2,o.status=e.response&&e.response.status;else throw e}return o}async function D(r){await m();var o={status:0,code:0};try{const e=await f("post/detail",{postId:r});o.status=e.status,o.code=1,e.status==1&&(o.content=e.content,o.title=e.title,o.authorInfo=e.authorInfo)}catch(e){if(e.name=="AxiosError")o.code=2,o.status=e.response&&e.response.status;else throw e}return o}async function V(r,o,e){await m();const s=e!=null?{postId:r,count:o,last:e}:{postId:r,count:o};var n={status:0,code:0};try{const p=await f("comment/1",s);n.status=p.status,n.code=1,p.status==1&&(n.comments=p.comments,n.last=p.last,n.more=p.more)}catch(p){if(p.name=="AxiosError")n.code=2,n.status=p.response&&p.response.status;else throw p}return n}async function U(r,o){await m(),r===null&&(r=t.value.recommendPostPerLoad);const e=o!=null?{count:r,last:o,contentLimit:t.value.recommendContentLimit}:{count:r,contentLimit:t.value.recommendContentLimit};var s={status:0,code:0};try{const n=await f("recommend/1",e);s.status=n.status,s.code=1,n.status==1&&(s.recommends=n.posts,s.last=n.last,s.more=n.more)}catch(n){if(n.name=="AxiosError")s.code=2,s.status=n.response&&n.response.status;else throw n}return s}async function N(r,o){await m(),r===null&&(r=t.value.myPostPerLoad);const e=o!=null?{count:r,last:o,contentLimit:t.value.myPostContentLimit}:{count:r,contentLimit:t.value.myPostContentLimit};var s={status:0,code:0};if(!v.value)return s.code=3,s;try{const n=await f("post/account",e);s.status=n.status,s.code=1,n.status==1&&(s.posts=n.posts,s.last=n.last,s.more=n.more)}catch(n){if(n.name=="AxiosError")s.code=2,s.status=n.response&&n.response.status;else throw n}return s}async function j(r,o){await m();var e={status:0,code:0};try{const s=await g("comment/new",{postId:r,content:o});e.status=s.status,e.code=1,s.status==1&&(e.commentId=s.commentId)}catch(s){if(s.name=="AxiosError")e.code=2,e.status=s.response&&s.response.status;else throw s}return e}async function q(r,o=!1){await m();var e={status:0,code:0};try{const s=await f("account/info",{userId:r,accountCount:o});e.status=s.status,e.code=1,s.status==1&&(e.accountInfo=s.accountInfo,e.accountCount=s.accountCount)}catch(s){if(s.name=="AxiosError")e.code=2,e.status=s.response.status;else throw s}return e}async function F(r,o,e){await m(),o===null&&(o=t.value.myPostPerLoad);const s=e!=null?{userId:r,count:o,last:e,contentLimit:t.value.myPostContentLimit}:{userId:r,count:o,contentLimit:t.value.myPostContentLimit};var n={status:0,code:0};try{const p=await f("post/account",s);n.status=p.status,n.code=1,p.status==1&&(n.posts=p.posts,n.last=p.last,n.more=p.more)}catch(p){if(p.name=="AxiosError")n.code=2,n.status=p.response&&p.response.status;else throw p}return n}return{config:t,accountInfo:d,isLogin:v,init:m,reInit:P,getAvatarUrl:_,accountLogin:O,accountLogout:$,postNew:x,getPostDetail:D,getRecommend:U,getComment:V,putComment:j,getAccountPost:N,deletePost:R,deleteComment:S,getUserInfo:q,getUserPost:F}}),ct={class:"smooth-mode-switch"},lt={class:"top-bar",style:{"background-color":"rgb(var(--mdui-color-surface-variant))"},"scroll-behavior":"shrink elevate"},mt=W({__name:"App",setup(i){const u=ut(),c=it();function l(){c.switchMode(a=>{a=="dark"?C("启用黑暗模式"):C("禁用黑暗模式")})}return K(async()=>{c.applyTheme(),await u.init()}),(a,t)=>(Q(),X(J,null,[t[7]||(t[7]=h("header",null,null,-1)),h("main",ct,[h("mdui-top-app-bar",lt,[h("mdui-button-icon",{onClick:t[0]||(t[0]=d=>a.$router.back())},t[3]||(t[3]=[h("mdui-icon-arrow-back",null,null,-1)])),h("img",{class:"responsive-image",src:st,onClick:t[1]||(t[1]=d=>a.$router.push("/"))}),t[5]||(t[5]=h("mdui-top-app-bar-title",{style:{color:"rgb(var(--mdui-color-on-surface-variant))"}},[h("strong",null,"墨宇留香")],-1)),t[6]||(t[6]=h("div",{style:{"flex-grow":"1"}},null,-1)),h("mdui-button-icon",{onClick:t[2]||(t[2]=d=>l())},t[4]||(t[4]=[h("mdui-icon-light-mode",{class:"child",style:{color:"rgb(var(--mdui-color-on-surface-variant))"}},null,-1)]))]),Y(z(G))]),t[8]||(t[8]=h("footer",null,null,-1))],64))}}),dt="modulepreload",pt=function(i){return"/"+i},k={},y=function(u,c,l){let a=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),v=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(c.map(f=>{if(f=pt(f),f in k)return;k[f]=!0;const g=f.endsWith(".css"),E=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${E}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":dt,g||(m.as="script"),m.crossOrigin="",m.href=f,v&&m.setAttribute("nonce",v),document.head.appendChild(m),g)return new Promise((P,_)=>{m.addEventListener("load",P),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function t(d){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=d,window.dispatchEvent(v),!v.defaultPrevented)throw d}return a.then(d=>{for(const v of d||[])v.status==="rejected"&&t(v.reason);return u().catch(t)})},ft=Z({history:tt("/"),routes:[{path:"/",name:"Home",component:()=>y(()=>import("./HomeView-ksQhdheh.js"),__vite__mapDeps([0,1,2,3]))},{path:"/login",name:"AccountLogin",component:()=>y(()=>import("./Login-CmC4huUq.js"),__vite__mapDeps([4,1,2,5]))},{path:"/register",name:"AccountRegister",component:()=>y(()=>import("./Register-Dvxgqav8.js"),__vite__mapDeps([6,1,7]))},{path:"/post/new",name:"PostNew",component:()=>y(()=>import("./PostNew-BFiuXj4Z.js"),__vite__mapDeps([8,1,2]))},{path:"/post",name:"PostDetail",component:()=>y(()=>import("./Post-C5oOjx86.js"),__vite__mapDeps([9,1,10,11]))},{path:"/post/account",name:"AccountPost",component:()=>y(()=>import("./AccountPost-B58ZAFfa.js"),__vite__mapDeps([12,1]))},{path:"/user",name:"User",component:()=>y(()=>import("./User-CPpw5taS.js"),__vite__mapDeps([13,1,14,15]))},{path:"/account/profile",name:"Profile",component:()=>y(()=>import("./Profile-B79dc2Ao.js"),__vite__mapDeps([16,1,14,15]))},{path:"/:catchAll(.*)",component:()=>y(()=>import("./NotFound-DDPPKVnR.js"),__vite__mapDeps([17,18,1])),meta:{title:"页面未找到"}}]}),L=et(mt);L.use(ot());L.use(ft);L.mount("#app");export{y as _,st as a,C as b,yt as e,gt as g,ht as m,ut as u};
