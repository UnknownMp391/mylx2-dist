import{r as n,o as b,h as f,i as l,w as r,v as d,u as g,F as w,g as x,A as y}from"./vendor-DHGCqLyH.js";import{u as k,a as A,m,b as B}from"./index-BvAo4jYu.js";import{a as L}from"./homePage-BLQsmEBP.js";const S={style:{padding:"10px",width:"100%"}},V=["disabled"],C=["disabled"],F={class:"bar"},M=["loading"],c={__name:"Login",setup(N){const v=k();L();const u=y(),a=n(""),o=n(""),t=n(!1);async function p(){if(t.value)return;if(a.value==""||o.value==""){m("警告","用户名和密码不能为空");return}t.value=!0;const i=await v.accountLogin(a.value,o.value);t.value=!1,i.status==1?(B("登录成功"),u.replace({path:"/"}),setTimeout(()=>{window.location.href="/"})):m("登录失败","用户名或者密码错误")}return b(async()=>{}),(i,e)=>(x(),f(w,null,[e[9]||(e[9]=l("div",{class:"container"},[l("img",{class:"avatar",src:A}),l("div",{class:"title"},"登录到 墨宇留香")],-1)),l("mdui-card",S,[r(l("mdui-text-field",{label:"用户名",type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),clearable:"",disabled:t.value},null,8,V),[[d,a.value]]),e[5]||(e[5]=l("br",null,null,-1)),e[6]||(e[6]=l("br",null,null,-1)),r(l("mdui-text-field",{label:"密码",type:"password","onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),"toggle-password":"",clearable:"",disabled:t.value},null,8,C),[[d,o.value]]),e[7]||(e[7]=l("br",null,null,-1)),e[8]||(e[8]=l("br",null,null,-1)),l("div",F,[l("mdui-button",{variant:"tonal",onClick:e[2]||(e[2]=s=>g(u).replace("/register"))},"注册"),e[4]||(e[4]=l("div",{style:{"flex-grow":"1"}},null,-1)),l("mdui-button",{onClick:e[3]||(e[3]=s=>p()),loading:t.value},"登录",8,M)])])],64))}};export{c as default};
